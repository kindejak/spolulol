{
  "version": 3,
  "sources": ["../../build/js/data.js", "../../build/js/helperFunctions.js", "../../build/js/index.js"],
  "sourcesContent": ["export const claims = [\n  \"Chráníme naši budoucnost!\",\n  \"Letos půjde o demokracii!\",\n  \"Teď je čas mít odvahu a dělat správná rozhodnutí!\",\n  \"Marek Eben nám dluží peníze\"\n];\n\nexport const claimsTitle = [\n  \"Teď je čas stát na správné straně\",\n  \"Teď jde o všechno\"\n];\n\nexport const generators = [\n  { url: \"https://picsum.photos/800\", weight: 3 },\n  { url: \"./public/masina.jpg\", weight: 1 },\n  { url: \"./public/cert.jpg\", weight: 1 },\n  { url: \"./public/less-home.jpg\", weight: 1 },\n  /*\n  { url: \"https://source.unsplash.com/800x800\", weight: 10 },\n  { url: \"https://source.unsplash.com/800x800/?communism\", weight: 3 },\n  { url: \"https://source.unsplash.com/800x800/?cat\", weight: 1 },\n  { url: \"https://source.unsplash.com/800x800/?puppy\", weight: 1 },\n  { url: \"https://source.unsplash.com/800x800/?chicken\", weight: 1 },\n  { url: \"https://source.unsplash.com/800x800/?angry\", weight: 3 },\n   */\n];\n", "/* eslint-disable no-param-reassign */\nexport const splitText = (text, maxLineLength) => {\n  const result = [];\n  while (text.length > maxLineLength) {\n    let pos = text.substring(0, maxLineLength).lastIndexOf(\" \");\n    pos = pos <= 0 ? maxLineLength : pos;\n    result.push(text.substring(0, pos));\n    let i = text.indexOf(\" \", pos) + 1;\n    if (i < pos || i > pos + maxLineLength) i = pos;\n    text = text.substring(i);\n  }\n  result.push(text);\n  return result;\n};\n\nexport const pickRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];\n\nexport const getAverageLuminance = (rgbData, pixelSkip = 6) => {\n  const luminanceOf = (r, g, b) => (0.2126 * r) + (0.7152 * g) + (0.0722 * b);\n  let luminanceSum = 0;\n  let luminanceDivisor = 0;\n  for (let i = 0; i < rgbData.length; i += 3 * pixelSkip) {\n    // +3 for R+G+B; pixelSkip because we don't need that many samples => less accurate, but faster!\n\n    const [r, g, b] = [rgbData[i] / 255, rgbData[i + 1] / 255, rgbData[i + 2] / 255];\n    const luminance = luminanceOf(r, g, b);\n    if (!Number.isNaN(luminance)) {\n      luminanceSum += luminance;\n      luminanceDivisor += 1;\n    }\n  }\n\n  return luminanceSum / luminanceDivisor;\n};\n", "import { claims, claimsTitle, generators } from \"./data.js\";\nimport { splitText, pickRandom, getAverageLuminance } from \"./helperFunctions.js\";\n\nconst LOGO_OFFSET_X = 680;\nconst LOGO_OFFSET_Y = 680;\nconst LUMINANCE_THRESHOLD = 0.7;\n\nconst unrolledGenerators = generators.flatMap(({ url, weight }) => Array(weight).fill(url));\n\nconst imageReader = new FileReader();\n\nconst logoLight = new Image();\nlogoLight.src = \"public/logo-light.png\";\n\nconst logoDark = new Image();\nlogoDark.src = \"public/logo-dark.png\";\n\n\nconst logoSpolu = new Image();\nlogoSpolu.src = \"public/SPOLU-kampan-2025-crop.png\";\n\nlet currentImage = new Image();\nlet currentText = \"Test text\";\nlet currentText2 = \"Test text\";\n\nconst rerollImage = async () => {\n  const imageData = await fetch(pickRandom(unrolledGenerators));\n\n  return new Promise((resolve) => {\n    const image = new Image();\n\n    image.addEventListener(\"load\", () => {\n      currentImage = image;\n      resolve();\n    });\n\n    image.crossOrigin = \"anonymous\";\n    image.src = imageData.url;\n  });\n};\n\nconst rerollText = () => {\n  currentText = pickRandom(claims);\n  currentText2 = pickRandom(claimsTitle);\n};\n\nconst canvas = document.getElementById(\"picture\");\nconst ctx = canvas.getContext(\"2d\");\nconst font = new FontFace(\"Bebas Neue\", \"url(public/BebasNeue-Bold.ttf)\");\nconst font_a = new FontFace(\"Ancizar Serif\", \"url(public/AncizarSerif-Regular.ttf)\");\n\nconst initFont = async () => {\n  await font.load();\n  document.fonts.add(font);\n  document.fonts.add(font_a);\n};\n\nconst setFile = (file) => {\n  if (!file.type.startsWith(\"image/\")) {\n    return;\n  }\n\n  imageReader.readAsDataURL(file);\n};\n\ncanvas.addEventListener(\"dragover\", (e) => e.preventDefault());\n\ncanvas.addEventListener(\"drop\", (e) => {\n  e.preventDefault();\n  if (!e.dataTransfer || e.dataTransfer.files.length <= 0) {\n    return;\n  }\n\n  setFile(e.dataTransfer.files[0]);\n});\n\nconst repaintImage = async () => {\n  // Clear canvas to black (for transparent images)\n  ctx.fillStyle = \"black\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  // Scale image to always fill the canvas\n  const scaleX = canvas.width / currentImage.width;\n  const scaleY = canvas.height / currentImage.height;\n  const scale = Math.max(scaleX, scaleY);\n  ctx.setTransform(scale, 0, 0, scale, 0, 0);\n  ctx.drawImage(currentImage, 0, 0);\n  ctx.setTransform(); // Reset transform\n\n  // === BOTTOM GREEN TEXT BANNER ===\n  const title = inputCustom2.value || currentText2;\n  const subtitle = inputCustom.value || currentText;\n\n  const titleFontSize = 60;\n  const subtitleFontSize = 30;\n  const padding = 20;\n  const lineSpacing = 10;\n  const totalHeight = padding * 2 + titleFontSize + subtitleFontSize + lineSpacing + 120;\n  const bannerY = canvas.height - totalHeight ;\n\n  // Green rectangle across the bottom\n  ctx.fillStyle = \"#00EA29\";\n  ctx.fillRect(0, bannerY, canvas.width, totalHeight);\n\n  // Draw title\n  ctx.fillStyle = \"black\";\n  ctx.font = `${titleFontSize}px 'Bebas Neue'`;\n  ctx.fillText(title, 30, bannerY + padding * 4);\n\n  // Draw subtitle\n  ctx.font = `${subtitleFontSize}px 'Ancizar Serif'`;\n  ctx.fillText(subtitle, 30, bannerY + padding * 3 + titleFontSize + lineSpacing);\n\n  ctx.drawImage(logoSpolu, LOGO_OFFSET_X, LOGO_OFFSET_Y);\n\n};\n\n\n\nimageReader.addEventListener(\"load\", (e) => {\n  currentImage = new Image();\n  currentImage.addEventListener(\"load\", () => repaintImage());\n  currentImage.src = e.target.result;\n});\n\nconst buttonRandom = document.getElementById(\"randomize\");\nbuttonRandom.addEventListener(\"click\", async () => {\n  rerollText();\n  await rerollImage();\n  repaintImage();\n});\n\nconst buttonRandomImg = document.getElementById(\"randomize-img\");\nbuttonRandomImg.addEventListener(\"click\", async () => {\n  await rerollImage();\n  repaintImage();\n});\n\nconst buttonRandomText = document.getElementById(\"randomize-text\");\nbuttonRandomText.addEventListener(\"click\", () => {\n  rerollText();\n  repaintImage();\n});\n\nconst inputCustomImg = document.getElementById(\"customImage\");\ninputCustomImg.addEventListener(\"change\", (e) => {\n  e.preventDefault();\n  if (e.target.files.length <= 0) {\n    return;\n  }\n  setFile(e.target.files[0]);\n});\nconst buttonCustomImg = document.getElementById(\"customImageBtn\");\nbuttonCustomImg.addEventListener(\"click\", () => {\n  inputCustomImg.click();\n});\n\nconst inputCustom = document.getElementById(\"customText\");\nconst replaceWithCustomText = async (e) => {\n  if (e.type === \"input\" || inputCustom.value) {\n    currentText = inputCustom.value;\n    repaintImage();\n  }\n};\ninputCustom.addEventListener(\"click\", replaceWithCustomText);\ninputCustom.addEventListener(\"input\", replaceWithCustomText);\n\nconst inputCustom2 = document.getElementById(\"customTextTitle\");\nconst replaceWithCustomText2 = async (e) => {\n  if (e.type === \"input\" || inputCustom2.value) {\n    currentText2 = inputCustom2.value;\n    repaintImage();\n  }\n};\ninputCustom2.addEventListener(\"click\", replaceWithCustomText2);\ninputCustom2.addEventListener(\"input\", replaceWithCustomText2)\n\nconst downloadLinkReal = document.createElement(\"a\");\ndownloadLinkReal.setAttribute(\"download\", \"spolu-stat.jpg\");\nconst linkSave = document.getElementById(\"save\");\nlinkSave.addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  downloadLinkReal.setAttribute(\"href\", canvas.toDataURL(\"image/jpeg\").replace(\"image/jpeg\", \"image/octet-stream\"));\n  downloadLinkReal.click();\n});\n\ninitFont();\n\nrerollText();\nrerollImage()\n  .then(() => repaintImage());\n"],
  "mappings": "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",
  "names": []
}
